<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bitcamp.newdeal.repository.LectureRepository">

	<resultMap type="lecture" id="lectureMap">
		<id column="lNo" property="lectureNo" />
		<result column="pNum" property="pNum" />
		<result column="lName" property="lectureName" />
		<result column="lSubject" property="lectureSubject" />
		<result column="lContent" property="lectureContent" />
		<result column="lRoom" property="lectureRoom" />
		<result column="lFile" property="lectureFile" />
		<result column="lMember" property="lectureMember" />
		<result column="lMaxMember" property="lectureMaxMember" />
		<result column="lAble" property="lectureAble" />
		<result column="lStartDay" property="lectureStartDay" />
		<result column="lEndDay" property="lectureEndDay" />
		<result column="lTime" property="lectureTime" />
	</resultMap>

	<select id="lectureList" parameterType="Lecture"
		resultMap="lectureMap">
		select lNo, lName, lSubject, lRoom, lMember, lMaxMember, lStartDay, lEndDay
		from P3_Lecture
	</select>
    
    <select id="myLectureList"
          parameterType="int"
          resultMap="lectureMap">
        SELECT * FROM P3_Lecture WHERE pNum=#{value}
  
    </select>
    
    <select id="selectOne"
          parameterType="int"
          resultMap="lectureMap">
        SELECT * FROM P3_Lecture WHERE lNo=#{value}
  
    </select>
    
    <select id="lecturePname"
            parameterType="int">
    SELECT pName FROM P3_Professor JOIN P3_Lecture 
    ON P3_Lecture.pNum = P3_Professor.pNum WHERE P3_Professor.pNum=#{value}
    </select>

	<insert id="insert" parameterType="Lecture">
		insert into P3_Lecture(pNum, lName,lSubject,lContent,lFile,lMaxMember,lRoom,lAble,lStartDay,lEndDay,lTime)
		values(#{pNum},#{lectureName},#{lectureSubject},#{lectureContent},#{lectureFile},#{lectureMaxMember},#{lectureRoom},'Y',#{lectureStartDay},#{lectureEndDay},#{lectureTime})
	</insert>
	
	<update id="update" parameterType="Lecture">
        update P3_Lecture set
        lName=#{lectureName},
        lSubject=#{lectureSubject},
        lContent=#{lectureContent},
        lFile=#{lectureFile},
        lMaxMember=#{lectureMaxMember}
        where 
            lNo = #{lectureNo}
        values(#{lectureName},#{lectureSubject},#{lectureContent},#{lectureFile},#{lectureMaxMember})
    </update>
	
	<delete id="delete" parameterType="int">
        delete from P3_Lecture
       where 
            lNo = #{lectureNo}
    </delete>


</mapper>




